---
import Layout from "../../layouts/Layout.astro";
import PostPreview from "../../components/PostPreview.astro";
import { formatBlogPosts } from "../../js/utils";
import Pagination from "../../components/Pagination.astro";
import CategoryCloud from "../../components/CategoryCloud.astro";
import AdsArea from "../../components/AdsArea.astro";

export async function getStaticPaths({ paginate }) {
    const allPosts = await Astro.glob("./*.md");
    const formattedPosts = formatBlogPosts(allPosts);

    return paginate(formattedPosts, {
        pageSize: 6,
    });
}

const { page } = Astro.props;
---

<Layout
    title="Publicaciones - Blog de diseño, desarrollo, tecnología, seo, marketing online y trucos"
    description="Blog de diseño, desarrollo, tecnología, seo, marketing online y trucos."
>
    <div class="main-content">
        <header>
            <h1>Publicaciones</h1>
            <h2>
                Blog de diseño, desarrollo, tecnología, seo, marketing online y
                trucos
            </h2>
        </header>

        <main>
            <AdsArea />

            <Pagination prevURL={page.url.prev} nextURL={page.url.next} />

            <div class="wrapper-post">
                {page.data.map((post: any) => <PostPreview post={post} />)}
            </div>

            <Pagination prevURL={page.url.prev} nextURL={page.url.next} />

            <aside class="aside-bottom">
                <CategoryCloud showCount={true} />

                <AdsArea />
            </aside>
        </main>
    </div>
</Layout>

<style lang="stylus">
    .wrapper-post
        padding 2vh 0 2vh 0
        display flex
        flex-wrap wrap
        gap 1.4vh
</style>
